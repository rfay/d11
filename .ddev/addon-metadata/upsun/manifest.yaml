name: upsun
repository: ddev/ddev-upsun
version: v0.3.0
install_date: "2026-02-01T12:19:08-07:00"
project_files:
    - upsun/install-hook.php
    - upsun/UpsunConfigParserInterface.php
    - upsun/UpsunConfigParser.php
    - upsun/FixedConfigDetector.php
    - upsun/FixedConfigParser.php
    - upsun/DdevConfigGenerator.php
    - upsun/PlatformEnvironmentGenerator.php
    - upsun/EnvironmentLoader.php
    - upsun/ServiceDetector.php
    - upsun/debug-parser.php
global_files: []
removal_actions:
    - "<?php\n# #ddev-description Remove Upsun-generated files\necho \"=== Upsun add-on removal cleanup ===\\n\";\n$files_to_remove = [\n  'config.upsun.yaml',\n  'web-build/Dockerfile.upsun',\n  '.env.upsun-services',\n  'web-entrypoint.d/environment.sh'\n];\n\nforeach ($files_to_remove as $file) {\n  if (file_exists($file)) {\n    $content = file_get_contents($file);\n    $isGenerated = strpos($content, '#ddev-generated') !== false || \n                  strpos($content, '# Upsun service versions (auto-generated') !== false;\n    \n    if ($isGenerated) {\n      if (unlink($file)) {\n        echo \"✅ Removed: $file\\n\";\n      } else {\n        echo \"❌ Failed to remove: $file\\n\";\n      }\n    } else {\n      echo \"⚠️  Skipped: $file (not auto-generated)\\n\";\n    }\n  } else {\n    echo \"ℹ️  Not found: $file\\n\";\n  }\n}\n\n// Clean up empty web-build directory\nif (is_dir('web-build')) {\n  $files = array_diff(scandir('web-build'), ['.', '..']);\n  if (empty($files)) {\n    if (rmdir('web-build')) {\n      echo \"✅ Removed empty directory: web-build\\n\";\n    }\n  }\n}\necho \"=== Cleanup completed ===\\n\";\n"
