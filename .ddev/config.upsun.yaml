#ddev-generated by ddev-upsun add-on from .upsun/config.yaml
# If you want to edit this file (not recommended) remove the line above.

---
disable_settings_management: true
docroot: web
php_version: "8.4"
nodejs_version: "20"
database:
  type: mariadb
  version: "11.8"
additional_hostnames: []
additional_fqdns: []
web_environment:
- N_PREFIX=/app/.global
- PLATFORM_APP_DIR=/app
- PLATFORM_APPLICATION=eyJuYW1lIjoiZDExIiwidHlwZSI6InBocDo4LjQiLCJkaXNrIjoyMDQ4LCJzaXplIjoiUyIsInByZWZsaWdodCI6eyJlbmFibGVkIjp0cnVlLCJpZ25vcmVkX3J1bGVzIjpbXX19
- PLATFORM_APPLICATION_NAME=d11
- PLATFORM_BRANCH=main
- PLATFORM_DOCUMENT_ROOT=/var/www/html/web
- PLATFORM_ENVIRONMENT_TYPE=development
- PLATFORM_PROJECT_ENTROPY=79de57c100380de8854da9e2472f3d5dbc67a2fe4e8ecfbf924df6d72fe5034e
- PLATFORM_ROUTES=eyJodHRwczpcL1wvZDExLmRkZXYuc2l0ZVwvIjp7ImF0dHJpYnV0ZXMiOnt9LCJpZCI6bnVsbCwib3JpZ2luYWxfdXJsIjoiaHR0cHM6XC9cL3thbGx9XC8iLCJwcmltYXJ5Ijp0cnVlLCJwcm9kdWN0aW9uX3VybCI6Imh0dHBzOlwvXC9kMTEuZGRldi5zaXRlXC8iLCJ0eXBlIjoidXBzdHJlYW0iLCJ1cHN0cmVhbSI6ImQxMSJ9fQ==
- PLATFORM_VARIABLES=eyJOX1BSRUZJWCI6IlwvYXBwXC8uZ2xvYmFsIn0=
- PLATFORM_SMTP_HOST=localhost:1025
- PLATFORM_CACHE_DIR=/mnt/ddev-global-cache/ddev-upsun/d11
- PLATFORM_TREE_ID=b2715bf871968b45b048262d6a829fd0ca35f591
- MARIADB_HOST=db
- MARIADB_PORT=3306
- MARIADB_PATH=db
- MARIADB_USERNAME=db
- MARIADB_PASSWORD=db
- MARIADB_SCHEME=mysql
- REDIS_HOST=redis
- REDIS_PORT=6379
- REDIS_SCHEME=redis
- DB_HOST=db
- DB_PORT=3306
- DB_PATH=db
- DB_DATABASE=db
- DB_USERNAME=db
- DB_PASSWORD=db
- DB_SCHEME=mysql
- DATABASE_URL=mysql://db:db@db:3306/db
- CACHE_HOST=redis
- CACHE_PORT=6379
- CACHE_SCHEME=redis
- CACHE_URL=redis://redis:6379
- REDIS_URL=redis://redis:6379
webimage_extra_packages:
- php8.4-redis
- php8.4-apcu
hooks:
  pre-start:
  - exec-host: chmod +w ${DDEV_DOCROOT:-web}/sites/default ${DDEV_DOCROOT:-web}/sites/default/settings*php
      2>/dev/null || true
  post-start:
  - exec: chmod +w ${DDEV_DOCROOT:-web}/sites/default ${DDEV_DOCROOT:-web}/sites/default/settings*php
      2>/dev/null || true
  - exec: if [ -f composer.json ] && [ ! -d vendor ]; then composer install --no-dev
      --optimize-autoloader; fi
  - exec: if [ -f vendor/bin/drush ]; then mkdir -p ~/.drush; ln -sf /var/www/html/.drush/drush.yml
      ~/.drush/drush.yml 2>/dev/null || true; fi
  - exec: |
      cd /var/www/html
      set -e
      # fast.
  - exec: |
      cd /var/www/html
      set -e
      php ./drush/upsun_generate_drush_yml.php
      cd web
      bash $PLATFORM_APP_DIR/drush/upsun_deploy_drupal.sh
  - exec: if [ -f vendor/bin/drush ] && [ -d config/sync ] && [ "$(find config/sync
      -name "*.yml" 2>/dev/null | wc -l)" -gt 0 ]; then cd web && ../vendor/bin/drush
      config:import --yes || true; fi
...
